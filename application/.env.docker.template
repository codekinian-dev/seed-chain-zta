# Environment Configuration for VPS Deployment
# Copy this file to .env.docker.local and fill in your actual values

# ========================================
# Server Configuration
# ========================================
PORT=3001
NODE_ENV=production

# ========================================
# Keycloak Configuration
# ========================================
# IMPORTANT: Replace 'YOUR_VPS_IP' with your actual VPS IP address or domain
# Example: http://103.123.45.67:8080 or http://mydomain.com:8080
KEYCLOAK_URL=http://YOUR_VPS_IP:8080
KEYCLOAK_REALM=SeedCertificationRealm
KEYCLOAK_CLIENT_ID=seed-api-gateway

# Generate a secure random secret for your client
# Run: openssl rand -hex 32
KEYCLOAK_CLIENT_SECRET=REPLACE

# ========================================
# Session Configuration
# ========================================
# Generate a secure random session secret
# Run: openssl rand -base64 32
SESSION_SECRET=REPLACE

# ========================================
# Hyperledger Fabric Configuration
# ========================================
FABRIC_CHANNEL=benihchannel
FABRIC_CONTRACT=benih-certification
FABRIC_WALLET_PATH=/app/wallet
FABRIC_USER=appUser
FABRIC_ORG_MSP=BPSBPMSP

# IMPORTANT: Set to 'false' when running in Docker on VPS
FABRIC_AS_LOCALHOST=false

# ========================================
# IPFS Configuration
# ========================================
# IMPORTANT: Replace 'YOUR_VPS_IP' with your actual VPS IP address
# If IPFS is running on the same VPS, use the VPS IP or 'host.docker.internal'
IPFS_HOST=YOUR_VPS_IP
IPFS_PORT=9094
IPFS_PROTOCOL=http

# Optional: If you have separate IPFS cluster API
# IPFS_API_URL=http://YOUR_VPS_IP:9094

# ========================================
# Redis Configuration
# ========================================
# Use 'redis' as hostname (Docker service name)
REDIS_HOST=redis
REDIS_PORT=6379
QUEUE_NAME=ipfs-upload-queue

# ========================================
# File Upload Configuration
# ========================================
# Maximum file size in bytes (10MB default)
MAX_FILE_SIZE=10485760

# ========================================
# Security Configuration
# ========================================
# CORS origin - set to your frontend domain in production
# Example: https://yourdomain.com or multiple: https://domain1.com,https://domain2.com
CORS_ORIGIN=*

# Rate limiting (15 minutes window)
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=100

# ========================================
# Cleanup Configuration
# ========================================
# Cleanup interval in minutes
CLEANUP_INTERVAL=30

# Maximum age of temporary files in minutes
CLEANUP_MAX_AGE=60

# ========================================
# Quick Setup Commands
# ========================================
# 1. Generate secrets:
#    openssl rand -hex 32  # For KEYCLOAK_CLIENT_SECRET
#    openssl rand -base64 32  # For SESSION_SECRET
#
# 2. Get your VPS IP:
#    curl ifconfig.me
#    # or
#    hostname -I | awk '{print $1}'
#
# 3. Copy this file:
#    cp .env.docker.template .env.docker.local
#
# 4. Edit with your values:
#    nano .env.docker.local
#
# 5. Deploy:
#    docker-compose -f docker-compose.prod.yml up -d
